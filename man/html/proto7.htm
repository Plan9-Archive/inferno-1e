<html><head><title>Inferno<br>Communications Protocol, Styx</title></head>
<body bgcolor=white>
 
<a href="index.htm"><img src="Top.gif" alt="[Top]" align=bottom></a> <a href="proto6.htm"><img src="Previous.gif" alt="[Prev]" align=bottom></a> <a href="proto8.htm"><img src="Next.gif" alt="[Next]" align=bottom></a> 
<hr><br>
 
<a name="847164">
<center><h1> read, write - transfer data from and to a file</h1></center>
</a><pre><tt>Tread  <em>tag</em> [2] <em>fid</em> [2] <em>offset</em> [8] <em>count</em> [2]
Rread  <em>tag</em> [2] <em>fid</em> [2] <em>count</em>  [2] <em>pad</em>   [1] <em>data</em> [<em>count</em>]
Twrite <em>tag</em> [2] <em>fid</em> [2] <em>offset</em> [8] <em>count</em> [2] <em>pad</em> [1] 
<em>                                           data</em> [<em>count</em>]
Rwrite <em>tag</em> [2] <em>fid</em> [2] <em>count</em>  [2]
</tt></pre></p><a name="847172">
<h2> Description</h2>
</a><a name="847173">
<h3> The read Transaction</h3>
</a><a name="847174">
The <em>read</em> request asks for <em>count</em> bytes of data from the file identified by <em>fid</em> starting <em>offset</em> bytes after the beginning of the file. The <em>fid</em> which must have been previously opened for reading. The <em>count</em> field must be less than or equal to <em>MAXFDATA</em> (8192, defined in <em>&lt;styx.h&gt;</em>). The bytes are returned with the <em>read</em> reply message.<p>
</a><a name="847175">
The <em>count</em> field in the reply indicates the number of bytes returned. This may be less than the requested amount. If the <em>offset</em> field is greater than the number of bytes in the file, a count of zero will be returned.<p>
</a><a name="847176">
For directories, <em>read</em> returns an integral number of directory entries exactly as in <em>stat</em> (see <em><a href="proto9.htm#847231"></em><em>stat, wstat - inquire or change file attributes</em><em></a></em>). one for each member of the directory. The read request message must have <em>offset</em> and <em>count</em> zero modulo <em>DIRLEN</em> (116, defined in <em>&lt;lib9.h&gt;</em>).<p>
</a><a name="847180">
<h3> The write Transaction </h3>
</a><a name="847181">
The <em>write</em> request asks that <em>count</em> bytes of data be recorded in the file identified by <em>fid</em> starting <em>offset</em> bytes after the beginning of the file. The <em>fid</em> must have been previously opened for writing.<p>
</a><a name="847182">
Directories may not be written by this mechanism. Directories are modified by <em>create</em> and <em>remove</em> requests. (See <a href="proto6.htm#847076"><em>open, create - prepare a fid for I/O on a file</em></a> for a description of the <em>create</em> request and <a href="proto8.htm#847206"><em>remove - remove a file from a server</em></a>.)<p>
</a><a name="847189">
The <em>write</em> reply reports the number of bytes actually written. It is usually an error if this is not the same as requested.<p>
</a><a name="847190">
<h2> Entry Points</h2>
</a><a name="847191">
The <em>read</em> and <em>write</em> messages are generated by the corresponding calls (see <a href="md_sys12.htm#845197"><em>read, write, stream - read, write, or stream file</em> in Chapter 8</a>). Because of the <em>MAXFDATA</em> limit, more than one message may be produced by a single call.<p>
</a><a name="847195">
<h2> See Also 
<Table Border="3">
<caption></caption>
<tr><td><a name="850203">
<a href="md_sys12.htm#845197"><em>read, write, stream - read, write, or stream file</em> in Chapter 8</a> <p>
</a>
<tr><td><a name="850205">
<em><a href="proto9.htm#847231"></em><em>stat, wstat - inquire or change file attributes</em><em></a></em> <p>
</a>

</Table>

<Table>
<tr><td>
</Table>
</h2>
</a>
<hr><br>
 
<a href="index.htm"><img src="Top.gif" alt="[Top]" align=bottom></a> <a href="proto6.htm"><img src="Previous.gif" alt="[Prev]" align=bottom></a> <a href="proto8.htm"><img src="Next.gif" alt="[Next]" align=bottom></a> 
<hr><br>



<address>
<a href="mailto:infernosupport@lucent.com">infernosupport@lucent.com</a>
</address>

<i>Copyright &#169; 1996,Lucent Technologies, Inc.   All rights
reserved.</i>


<!-- Last updated: 02/08/97 11:48:07 -->

</body>
</html>
